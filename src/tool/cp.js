/** * Copyright by Alexrander Luo. * Create Date 2016/9/25 * Email 496952252@qq.com */(function (factory) {    if (typeof exports === 'object') {        // Node/CommonJS        module.exports = factory();    } else if (typeof define === 'function' && define.amd) {        // AMD        define(factory);    } else {        // Browser globals (with support for web workers)        var glob;        try {            glob = window;        } catch (e) {            glob = self;        }        glob.my = factory();    }}(function (undefined) {    'use strict';    /*********************************************************************     *                    常用封装                                  *     **********************************************************************/    var my = {};    my.badClone=function(obj){        return JSON.parse(JSON.stringify(obj));    }    my.deepClone=function(p,c){        var c = c || {};        for (var i in p) {            if(! p.hasOwnProperty(i)){                continue;            }            if (typeof p[i] === 'object') {                c[i] = (p[i].constructor === Array) ? [] : {};                my.deepClone(p[i], c[i]);            } else {                c[i] = p[i];            }        }        return c;    }    //avalon 的辅助    my.render=function(vID,source){        console.log("render:",vID)        for(var key in  source){            if(typeof (avalon.vmodels[vID].state[key]) != 'undefined'){                avalon.vmodels[vID].state[key]="";                avalon.vmodels[vID].state[key]= my.badClone(source[key]);            }else if(typeof (avalon.vmodels[vID][key]) == 'function'){                avalon.vmodels[vID][key]="";                avalon.vmodels[vID][key]= source[key];            }        }    }    //my.collector=function(vID,dest){    //    for(var key in avalon.vmodels[vID].$model.state){    //        if( typeof (dest[key]) != 'undefined'){    //            dest[key]=my.badClone(avalon.vmodels[vID].$model.state[key]);    //        }    //    }    //    return {msg:"true"};    //}    my.collector=function(vID){        return my.badClone(avalon.vmodels[vID].$model.state);    }    return my;}));