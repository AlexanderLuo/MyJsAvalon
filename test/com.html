<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<script src="../lib/avalon.js"></script>
<script src="../lib/jquery-1.10.2.min.js"></script>
<script>

    var PubSub = (function() {
        var events = {};
        return {
            subscribe: function(mesId, fn) {
                if (!events[mesId]) events[mesId] = [];
                events[mesId].push(fn);
            },
            publish: function(mesId) {
                var eventQueue = events[mesId]
                if (eventQueue) {
                    eventQueue.forEach(function(item) {
                        item();
                    });
                }
            },
            off: function(mesId,fn) {
                var eventQueue = events[mesId];
                if (eventQueue) {
                    if(fn!=null){
                        events[mesId] = eventQueue.filter(function(item) {
                            return item !== fn;
                        });
                    }
                    if(fn ==null){
                        events[mesId]=[];
                    }

                }

            }
        }
    }());


</script>


<script>

    avalon.ready(function () {
        var init={};
        init = avalon.define({
            $id: "init",
            init: function () {
                console.log("init");

                PubSub.subscribe("Pager",function(){
                    Pager.records=3;
                    Pager.click=function(pageNo){
                        init.query(pageNo);
                    }
                });

            },
            query:function(pageNo){
                console.log(pageNo)
                Pager.pageNo++;
                Pager.total--;
                Pager.records++;
            }
        });
        avalon.scan();
        init.init();

    })



</script>

<body ms-controller="init" >

<div  ms-include-src=" './Pager.html' "  > </div>







</body>





</html>